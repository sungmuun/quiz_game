<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ìˆ˜ë ¨íšŒ ë„Œì„¼ìŠ¤ í€´ì¦ˆ</title>
  <style>
    :root{ --bg:#0f172a; --card:#111827; --muted:#94a3b8; --text:#e5e7eb; --accent:#22d3ee; --bad:#ef4444; --good:#10b981; }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(135deg,#0f172a,#1f2937);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--text)}
    .container{max-width:900px;margin:0 auto;padding:24px}
    .card{background:rgba(17,24,39,.7);backdrop-filter:blur(8px);border:1px solid #1f2937;border-radius:16px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,.3)}
    h1,h2{margin:0 0 12px}
    h1{font-size: clamp(22px,3.2vw,32px)}
    h2{font-size: clamp(18px,2.5vw,24px);color:var(--muted)}
    label{display:block;margin:10px 0 6px;color:var(--muted)}
    input[type="text"]{width:100%;padding:14px 16px;border-radius:12px;border:1px solid #334155;background:#0b1220;color:var(--text)}
    button{cursor:pointer;border:0;border-radius:12px;padding:12px 16px;font-weight:700}
    .btn{background:linear-gradient(135deg,#06b6d4,#22d3ee);color:#082f49}
    .btn.secondary{background:#0b1220;color:var(--text);border:1px solid #334155}
    .btn.warn{background:#1f2937;color:#fca5a5;border:1px solid #ef4444}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .flex{display:flex;gap:12px;align-items:center}
    .space{height:8px}
    .timer{font-variant-numeric:tabular-nums;font-weight:800}
    .pill{display:inline-flex;align-items:center;gap:6px;background:#0b1220;border:1px solid #334155;color:var(--muted);padding:6px 10px;border-radius:999px}
    .hintBox{margin-top:12px;padding:12px;border-radius:12px;background:#0b1220;border:1px dashed #475569;display:none}
    .foot{margin-top:10px;color:var(--muted);font-size:14px}
    .hidden{display:none}
    .score{font-size:20px;color:var(--good)}
    .bad{color:var(--bad)}
    .qIndex{color:#a5b4fc}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
    .summary table{width:100%;border-collapse:collapse;margin-top:12px}
    .summary th,.summary td{border-bottom:1px solid #334155;padding:10px;text-align:left}
    .small{font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="container">

    <!-- Start Screen -->
    <section id="start" class="card">
      <h1>ìˆ˜ë ¨íšŒ ë„Œì„¼ìŠ¤ í€´ì¦ˆ</h1>
      <h2>ì¡° ì •ë³´ ì…ë ¥</h2>
      <label for="leader">ì¡°ì¥ ì´ë¦„</label>
      <input id="leader" type="text" placeholder="ì˜ˆ) ê¹€í•˜ëŒ" />
      <label for="team">ì¡° ì´ë¦„</label>
      <input id="team" type="text" placeholder="ì˜ˆ) ë¹„ë‘˜ê¸°ì¡°" />
      <div class="space"></div>
      <button class="btn" id="startBtn">í™•ì¸ â†’ í€´ì¦ˆ ì‹œì‘</button>
      <div class="foot small">í™•ì¸ì„ ëˆ„ë¥´ë©´ 1ë²ˆ ë¬¸ì œë¶€í„° ì‹œì‘ë©ë‹ˆë‹¤. (ë¬¸í•­ ë‹¹ 2ë¶„ ì œí•œ)</div>
    </section>

    <!-- Quiz Screen -->
    <section id="quiz" class="card hidden">
      <div class="flex" style="justify-content:space-between">
        <div class="pill">ë¬¸í•­ <span class="qIndex" id="qNum">1</span> / <span id="qTotal">10</span></div>
        <div class="pill timer">ë‚¨ì€ ì‹œê°„: <span id="time">02:00</span></div>
      </div>
      <h2 id="question" style="margin-top:14px"></h2>
      <label for="answer">ì •ë‹µ</label>
      <input id="answer" type="text" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off" />
      <div id="feedback" class="foot"></div>
      <div class="row" style="margin-top:12px">
        <button class="btn secondary" id="hintBtn">íŒíŠ¸ ë³´ê¸°</button>
        <button class="btn" id="submitBtn">ì œì¶œ</button>
      </div>
      <div id="hintBox" class="hintBox"></div>
      <div class="foot small">â€» íŒíŠ¸ ì‚¬ìš© ì‹œ <b class="bad">5ì  ê°ì </b>ë©ë‹ˆë‹¤.</div>
    </section>

    <!-- Summary Screen -->
    <section id="summary" class="card hidden summary">
      <h1>ê²°ê³¼</h1>
      <div class="flex" style="justify-content:space-between">
        <div>
          <div><b>íŒ€</b> : <span id="sumTeam"></span></div>
          <div><b>íŒ€ì¥</b> : <span id="sumLeader"></span></div>
        </div>
        <div class="score">ì´ì  : <span id="sumScore">0</span> ì </div>
      </div>

      <table>
        <thead>
          <tr><th>#</th><th>ë¬¸ì œ</th><th>ë‚´ ë‹µ</th><th>ì •ë‹µ</th><th>ì ìˆ˜</th><th>íŒíŠ¸</th></tr>
        </thead>
        <tbody id="rows"></tbody>
      </table>

      <div class="row" style="margin-top:14px">
        <button class="btn" id="sendBtn">ì „ì†¡ (ë¬¸ìì•± ì—´ê¸°)</button>
        <button class="btn secondary" id="copyBtn">ê²°ê³¼ ë³µì‚¬</button>
        <button class="btn warn" id="restartBtn">ë‹¤ì‹œ ì‹œì‘</button>
      </div>
      <div class="foot small">
        âš ï¸ ë¸Œë¼ìš°ì €ì—ì„œ ë¬¸ì(SMS) ì „ì†¡ì€ í†µì‹ ì‚¬/ê¸°ê¸° í™˜ê²½ì— ë”°ë¼ ì§€ì›ì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë²„íŠ¼ì´ ì‘ë™í•˜ì§€ ì•Šìœ¼ë©´ <u>ê²°ê³¼ ë³µì‚¬</u> í›„ ì§ì ‘ ë¬¸ìì— ë¶™ì—¬ë„£ì–´ ì£¼ì„¸ìš”.<br/>
        ìˆ˜ì‹ ë²ˆí˜¸: 010-7162-1599
      </div>
    </section>

  </div>

  <script>
    // ====== ë°ì´í„° ì„¤ì • ======
    const POINTS_PER_QUESTION = 10; // ê¸°ë³¸ ë°°ì 
    const HINT_PENALTY = 5;         // íŒíŠ¸ ì‚¬ìš© ì‹œ ê°ì 
    const TIME_LIMIT_SEC = 120;      // ê° ë¬¸í•­ 2ë¶„

    const QUIZ = [
      { q: "í˜¸ì£¼ì˜ í™”íëŠ”?", a: ["í˜¸ì£¼ë¨¸ë‹ˆ","í˜¸ ì£¼ë¨¸ë‹ˆ"], hint: "â€˜ì˜¤ìŠ¤íŠ¸ë ˆì¼ë¦¬ì•„â€™ì™€ ëˆì„ ë³´ê´€í•˜ëŠ” ê³³ì„ í•©ì³ë³´ì„¸ìš”." },
      { q: "ë…¼ë¦¬ì ì¸ ì‚¬ëŒì´ ì´ì„ ì  ë•Œ ë‚˜ëŠ” ì†Œë¦¬?", a: ["íƒ€ë‹¹íƒ€ë‹¹","íƒ€ë‹¹ íƒ€ë‹¹"], hint: "ì˜¬ë°”ë¥´ë‹¤ì˜ ë‹¤ë¥¸ í‘œí˜„ + ì´ ì†Œë¦¬ë¥¼ ë‘ ë²ˆ ë°˜ë³µí•´ë³´ì„¸ìš”." },
      { q: "ì™•ì´ ê¶ì— ê°€ê¸° ì‹«ì„ ë•Œ í•˜ëŠ” ë§ì€?", a: ["ê¶ì‹œë "], hint: "ë¶ˆí‰ì„ ë‚˜íƒ€ë‚´ëŠ” ì˜ì„±ì–´ì— â€˜ê¶â€™ì„ ë¶™ì—¬ë³´ì„¸ìš”." },
      { q: "ìš°ë¦¬ë‚˜ë¼ ìœ„ì¸ ì¤‘ì— ì´ê°€ ë˜ê²Œ ëˆ„ëŸ° ì‚¬ëŒì€?", a: ["í‡´ê³„ì´í™©","í‡´ê³„ ì´í™©"], hint: "ì¡°ì„ ì‹œëŒ€ ì„±ë¦¬í•™ì ì´ë¦„ ì†ì— ìƒ‰ê¹”ì´ ìˆ¨ì–´ ìˆìŠµë‹ˆë‹¤." },
      { q: "í˜•ì„ ë§¤ìš° ì¢‹ì•„í•˜ëŠ” ë™ìƒì„ ê°€ë¦¬í‚¤ëŠ” ë§?", a: ["í˜•ê´‘íœ","í˜•ê´‘íŒ¬"], hint: "â€˜í˜•â€™ì„ ì¢‹ì•„í•˜ëŠ” íŒ¬ê³¼, ê³µë¶€í•  ë•Œ ì“°ëŠ” í•„ê¸°êµ¬ë¥¼ ì—°ê²°í•´ë³´ì„¸ìš”." },
      { q: "ë§¥ì£¼ê°€ ì£½ìœ¼ë©´ì„œ ë‚¨ê¸°ëŠ” ë§ì€?", a: ["ìœ ì–¸ë¹„ì–´","ìœ ì–¸ ë¹„ì–´"], hint: "ì£½ê¸° ì „ì— ë‚¨ê¸°ëŠ” ë§ + ìˆ ì˜ í•œ ì¢…ë¥˜(ë°œìŒ ë¹„ìŠ·)." },
      { q: "ë“¤ì–´ê°ˆ ë• 1ì²œëª…, ë‚˜ì˜¬ ë• 100ëª…ì¸ ì¥ì†ŒëŠ”?", a: ["ì¸ì²œì•„ì›ƒë°±","ì¸ì²œ ì•„ì›ƒë°±"], hint: "ë„ì‹œ ì´ë¦„ + í˜¸ì£¼ì‹ ë ˆìŠ¤í† ë‘ ì´ë¦„ì„ í•©ì³ë³´ì„¸ìš”." },
      { q: "ê´‘ë¶€ê°€ ê°€ì¥ ë§ì€ ë‚˜ë¼ëŠ”?", a: ["ìºëƒ","ì¼€ëƒ"], hint: "â€˜ìºë‚´ë‹¤â€™ì™€ ë°œìŒì´ ë¹„ìŠ·í•œ ì•„í”„ë¦¬ì¹´ ë‚˜ë¼." },
      { q: "í•­ìƒ ì˜ì‹¬í•˜ë©´ì„œ í•´ì•¼í•˜ëŠ” ë³´ë“œ ê²Œì„ì€?", a: ["ì  ê°€","Jenga"], hint: "â€˜~ì¸ê°€?â€™ë¼ê³  ì˜ì‹¬í•˜ëŠ” ë§íˆ¬ì™€ ë°œìŒì´ ë¹„ìŠ·í•©ë‹ˆë‹¤." },
      { q: "ì‚¬ë‘ì— ë¹ ì§€ë©´, ê·¸ ì‚¬ë‘ì˜ ë¬´ê²ŒëŠ” ëª‡ ê·¼ì¼ê¹Œìš”?", a: ["ë„¤ê·¼","4ê·¼","ì‚¬ê·¼"], hint: "ì„¤ë  ë•Œ ì‹¬ì¥ì´ í•˜ëŠ” ì†Œë¦¬ë¥¼ ë‘ ë²ˆ ë”í•´ë³´ì„¸ìš”." },
    ];

    // ====== ìƒíƒœ ======
    const state = {
      idx: 0,
      time: TIME_LIMIT_SEC,
      timer: null,
      leader: "",
      team: "",
      results: [], // {q,a,correct,score,usedHint,myAnswer}
      usedHintCurrent: false,
      currentCorrect: false,
      lastAnswer: "",
    };

    // ====== ì—˜ë¦¬ë¨¼íŠ¸ ======
    const $ = (sel) => document.querySelector(sel);
    const start = { wrap: $('#start'), leader: $('#leader'), team: $('#team'), btn: $('#startBtn') };
    const quiz = { wrap: $('#quiz'), qNum: $('#qNum'), qTotal: $('#qTotal'), question: $('#question'), ans: $('#answer'), time: $('#time'), hintBtn: $('#hintBtn'), hintBox: $('#hintBox'), submitBtn: $('#submitBtn'), feedback: $('#feedback') };
    const summary = { wrap: $('#summary'), rows: $('#rows'), sumTeam: $('#sumTeam'), sumLeader: $('#sumLeader'), sumScore: $('#sumScore'), copyBtn: $('#copyBtn'), sendBtn: $('#sendBtn'), restartBtn: $('#restartBtn') };

    quiz.qTotal.textContent = QUIZ.length;

    // ====== ìœ í‹¸ ======
    const normalize = (s) => (s||"").toString().trim().replace(/\s+/g,'').toLowerCase();

    function startTimer(){
      clearInterval(state.timer);
      state.time = TIME_LIMIT_SEC;
      renderTime();
      state.timer = setInterval(()=>{
        state.time--; renderTime();
        if(state.time <= 0){
          clearInterval(state.timer);
          // ì‹œê°„ ì¢…ë£Œ: ì •ë‹µ ì—¬ë¶€ì— ë”°ë¼ ê¸°ë¡ í›„ ë‹¤ìŒ ë¬¸ì œë¡œ ì´ë™
          finalizeCurrent(state.currentCorrect, true);
        }
      },1000);
    }

    function renderTime(){
      const m = String(Math.floor(state.time/60)).padStart(2,'0');
      const s = String(state.time%60).padStart(2,'0');
      quiz.time.textContent = `${m}:${s}`;
    }

    function loadQuestion(){
      const item = QUIZ[state.idx];
      state.usedHintCurrent = false;
      state.currentCorrect = false;
      state.lastAnswer = "";
      quiz.qNum.textContent = state.idx + 1;
      quiz.question.textContent = item.q;
      quiz.ans.value = '';
      quiz.ans.disabled = false;
      quiz.feedback.textContent = '';
      quiz.hintBox.style.display = 'none';
      quiz.hintBox.textContent = '';
      quiz.submitBtn.textContent = 'ì œì¶œ';
      quiz.submitBtn.disabled = false;
      quiz.hintBtn.disabled = false;
      quiz.ans.focus();
      startTimer();
    }

    function checkAnswer(item, myAnswer){
      const normMy = normalize(myAnswer);
      return item.a.some(acc => normalize(acc) === normMy);
    }

    function finalizeCurrent(correct, timeUp=false){
      const item = QUIZ[state.idx];
      const myAnswer = correct ? state.lastAnswer : (state.lastAnswer || (timeUp ? '(ì‹œê°„ ì´ˆê³¼)' : '(ì˜¤ë‹µ)'));
      let score = correct ? POINTS_PER_QUESTION : 0; // ì •ë‹µì´ë©´ 10ì , ì•„ë‹ˆë©´ 0ì 
      if(state.usedHintCurrent && score>0) score = Math.max(0, score - HINT_PENALTY); // íŒíŠ¸ ì‚¬ìš©ì‹œ 5ì  ê°ì  â†’ 5ì 

      state.results.push({ q: item.q, a: item.a[0], myAnswer, correct, score, usedHint: state.usedHintCurrent });

      state.idx++;
      if(state.idx < QUIZ.length){ loadQuestion(); } else { showSummary(); }
    }

    function showSummary(){
      quiz.wrap.classList.add('hidden');
      summary.wrap.classList.remove('hidden');
      summary.sumTeam.textContent = state.team || '-';
      summary.sumLeader.textContent = state.leader || '-';
      const total = state.results.reduce((acc,r)=>acc+r.score,0);
      summary.sumScore.textContent = total;
      summary.rows.innerHTML = state.results.map((r,i)=>{
        const badge = r.correct ? 'âœ…' : 'âŒ';
        return `<tr>
          <td>${i+1}</td>
          <td>${r.q}</td>
          <td class="mono">${r.myAnswer || '-'}</td>
          <td class="mono">${r.a}</td>
          <td>${badge} ${r.score}</td>
          <td>${r.usedHint? 'ì‚¬ìš©':'-'}</td>
        </tr>`;
      }).join('');
    }

    function buildSmsBody(){
      const total = state.results.reduce((acc,r)=>acc+r.score,0);
      let text = `[ìˆ˜ë ¨íšŒ í€´ì¦ˆ ê²°ê³¼]\níŒ€:${state.team}\níŒ€ì¥:${state.leader}\nì´ì :${total}ì \n\n`;
      state.results.forEach((r,i)=>{
        text += `${i+1}. ${r.correct?'O':'X'} (${r.score}ì ) | ë‚´ë‹µ:\"${(r.myAnswer||'').replace(/\"/g,'\'')}\" | ì •ë‹µ:${r.a}${r.usedHint?' | íŒíŠ¸ì‚¬ìš©':''}\n`;
      });
      return encodeURIComponent(text);
    }

    // ====== ì´ë²¤íŠ¸ ======
    start.btn.addEventListener('click', ()=>{
      state.leader = start.leader.value.trim();
      state.team = start.team.value.trim();
      start.wrap.classList.add('hidden');
      quiz.wrap.classList.remove('hidden');
      state.idx = 0; state.results = [];
      loadQuestion();
    });

    quiz.hintBtn.addEventListener('click', ()=>{
      const item = QUIZ[state.idx];
      quiz.hintBox.textContent = 'ğŸ’¡ ' + item.hint;
      quiz.hintBox.style.display = 'block';
      state.usedHintCurrent = true; // í•œ ë²ˆì´ë¼ë„ ëˆ„ë¥´ë©´ ê°ì  ì ìš©
    });

    quiz.submitBtn.addEventListener('click', ()=>{
      const item = QUIZ[state.idx];
      const my = quiz.ans.value;
      state.lastAnswer = my;

      // ì´ë¯¸ ì •ë‹µì„ ë§ì¶˜ ìƒíƒœë¼ë©´, íƒ€ì´ë¨¸ ëë‚  ë•Œê¹Œì§€ ëŒ€ê¸° (ì¡°ê¸° ì§„í–‰ ë¶ˆê°€)
      if(state.currentCorrect){
        return;
      }

      const ok = checkAnswer(item, my);
      if(ok){
        state.currentCorrect = true; // ì •ë‹µ ìƒíƒœ ì €ì¥ (íƒ€ì„ì—… ì‹œ ìë™ ì§„í–‰)
        quiz.feedback.innerHTML = 'âœ… ì •ë‹µ! íƒ€ì´ë¨¸ê°€ ëë‚˜ë©´ ë‹¤ìŒ ë¬¸ì œë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤. (íŒíŠ¸ ì‚¬ìš© ì‹œ -5ì )';
        quiz.ans.disabled = true;      // ì…ë ¥ ì¤‘ì§€
        quiz.hintBtn.disabled = true;  // íŒíŠ¸ ì¤‘ì§€
        quiz.submitBtn.disabled = true; // ì¡°ê¸° ë„˜ê¹€ ë°©ì§€
        // íƒ€ì´ë¨¸ëŠ” ê³„ì† íë¥´ë‹¤ê°€ 0ì´ˆê°€ ë˜ë©´ finalizeCurrent(true) í˜¸ì¶œë¨
      } else {
        quiz.feedback.innerHTML = '<span class="bad">âŒ ì˜¤ë‹µ! ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.</span>';
      }
    });

    // Enter í‚¤: ì œì¶œ
    quiz.ans.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter'){
        e.preventDefault();
        quiz.submitBtn.click();
      }
    });

    summary.copyBtn.addEventListener('click', async ()=>{
      const total = state.results.reduce((acc,r)=>acc+r.score,0);
      let text = `[ìˆ˜ë ¨íšŒ í€´ì¦ˆ ê²°ê³¼]\níŒ€:${state.team}\níŒ€ì¥:${state.leader}\nì´ì :${total}ì \n\n`;
      state.results.forEach((r,i)=>{
        text += `${i+1}. ${r.correct?'O':'X'} (${r.score}ì ) | ë‚´ë‹µ:\"${r.myAnswer||''}\" | ì •ë‹µ:${r.a}${r.usedHint?' | íŒíŠ¸ì‚¬ìš©':''}\n`;
      });
      try{ await navigator.clipboard.writeText(text); alert('ê²°ê³¼ë¥¼ ë³µì‚¬í–ˆì–´ìš”. ë¬¸ì/ì¹´í†¡ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”!'); }
      catch{ alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆì–´ìš”. ë¸Œë¼ìš°ì € ê¶Œí•œì„ í™•ì¸í•´ì£¼ì„¸ìš”.'); }
    });

    summary.sendBtn.addEventListener('click', ()=>{
      const body = buildSmsBody();
      const phone = '01071621599';
      const uri = /iPhone|iPad|iPod/i.test(navigator.userAgent)
        ? `sms:${phone}&body=${body}`
        : `sms:${phone}?body=${body}`;
      window.location.href = uri;
    });

    summary.restartBtn.addEventListener('click', ()=>{
      state.idx = 0; state.results = []; state.leader = ''; state.team = '';
      start.leader.value = ''; start.team.value='';
      summary.wrap.classList.add('hidden');
      start.wrap.classList.remove('hidden');
    });
  </script>
</body>
</html>
